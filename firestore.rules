rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
    match /users/{userId} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.uid == userId;
    }

    // ğŸ› ï¸ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
    match /services/{serviceId} {
      allow read: if true;
      allow write: if request.auth != null
                   && request.auth.uid == request.resource.data.creatorId;
    }

    // ğŸ“ Ø§Ù„Ø¨ÙˆØ³ØªØ§Øª
    match /posts/{postId} {
      allow read: if true;
      allow write: if request.auth != null
                   && request.auth.uid == request.resource.data.creatorId;

      // ğŸ’¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
      match /comments/{commentId} {
        allow read, write: if request.auth != null;
      }

      // â¤ï¸ Ø§Ù„Ù„Ø§ÙŠÙƒØ§Øª
      match /likes/{likeId} {
        allow read, write: if request.auth != null;
      }
    }

    // ğŸ’¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© (Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¨ÙˆØ³Øª)
    match /comments/{commentId} {
      allow read, write: if request.auth != null;
    }

    // ğŸ’¬ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª
    match /chats/{chatId} {
      allow read, write: if request.auth != null
                         && request.auth.uid in resource.data.participants;

      // ğŸ“¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
      match /messages/{msgId} {
        allow read, write: if request.auth != null
                           && request.auth.uid in resource.data.participants;
      }
    }

    // ğŸ“Œ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø§Øª - posts
    match /savedPosts/{docId} {
      allow read, write: if request.auth != null
                         && request.auth.uid == request.resource.data.userId;
    }

    // ğŸ“Œ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø§Øª - services
    match /savedServices/{docId} {
      allow read, write: if request.auth != null
                         && request.auth.uid == request.resource.data.userId;
    }

    // ğŸ‘‘ Ø§Ù„Ø±ÙŠÙ… ÙŠÙˆØ±Ø«
    match /reemYouth/{userId} {
      allow read: if true;
      allow write: if request.auth != null && request.auth.uid == userId;
    }

    // ğŸ“£ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
    match /notifications/{notifId} {
      allow read, write: if request.auth != null
                         && request.auth.uid == request.resource.data.receiverId;
    }

    // ğŸ“¬ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¯Ø¹Ù…
    match /support_messages/{messageId} {
      allow read, write: if request.auth != null;
    }

    // âŒ ÙƒÙ„ Ø´ÙŠØ¡ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ Ù…Ø±ÙÙˆØ¶
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
